#!/bin/bash
set -euo pipefail

# =============================================================================
# Buildkite Environment Hook
# Generated by Ansible
# =============================================================================

GPU_ARCH="${BUILDKITE_PLUGIN_GPU_ARCH:-}"

if [ -n "$GPU_ARCH" ]; then
  echo "Setting environment for GPU architecture: $GPU_ARCH"
  
  case $GPU_ARCH in
    v100)
      export CUDA_VISIBLE_DEVICES=0
      ;;
    mi210|mi300a)
      export HIP_VISIBLE_DEVICES=0
      ;;
  esac
fi

# Set global CI environment variables
export BUILDKITE_CI=true
export CI=true
